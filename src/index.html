<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=2, minimum-scale=0.5, user-scalable=yes">
  <title>3D Globe</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #f0f0f0;
    }

    .canvas-container {
      width: 100%;
      height: 100vh;
      overflow: scroll;
      /* Enable scrolling */
      position: relative;
    }

    canvas {
      display: block;
    }
  </style>
</head>

<body>
  <div class="canvas-container">
    <script src="https://cdn.jsdelivr.net/npm/three@0.143/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.143/examples/js/controls/OrbitControls.js"></script>
    <script>
      const scene = new THREE.Scene();
      var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

      var renderer = new THREE.WebGLRenderer();
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.querySelector('.canvas-container').appendChild(renderer.domElement);

      // Add OrbitControls
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true; // Optional, for an inertia effect
      controls.dampingFactor = 0.25; // Optional, adjust for sensitivity
      controls.enableZoom = true; // Enable zooming
      controls.enablePan = false; // Disable panning (optional)
      controls.enableRotate = true; // Enable rotating
      controls.minDistance = 5; // Minimum zoom distance
      controls.maxDistance = 50; // Maximum zoom distance

      // Create a sphere
      const geometry = new THREE.SphereGeometry(5, 32, 32); // Radius, Width Segments, Height Segments
      const textureLoader = new THREE.TextureLoader();
      let material = new THREE.MeshPhongMaterial({
        map: textureLoader.load('../public/globe/map.jpg'),
        bumpMap: textureLoader.load('../public/globe/bump.jpg'),
        bumpScale: 0.5,
      });
      const globe = new THREE.Mesh(geometry, material);
      scene.add(globe);

      var light = new THREE.DirectionalLight();
      light.position.set(0, 0, 1).normalize();
      scene.add(light);

      // Set camera position
      camera.position.z = 15;

      // Animation loop
      function animate() {
        requestAnimationFrame(animate);

        globe.rotation.y += 0.005;

        controls.update(); // Update controls

        renderer.render(scene, camera);
      }

      animate();
    </script>
  </div>
</body>

</html>